<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta content="width=device-width, initial-scale=1">
   <title>ä½ ç”µå›¾ä¹¦ç®¡ç†ç³»ç»Ÿ</title>
   <link rel="stylesheet" type="text/css" href="./css/login.css">
   <link rel="stylesheet" href="./css/navigation.css">
   <style>
      body {
         font-family: Arial, sans-serif;
         margin: 0;
         padding: 0;
      }
   </style>
   <style>
   .destroy-container button {
      display: block;
      margin: 0 auto;
      font-size: 36px;
      color: white;
      background: red;
      border: none;
      border-radius: 4px;
      cursor: pointer;
   }
   .destroy-container input {
      display: block;
      margin: 0 auto 10px auto; /* è‡ªåŠ¨å±…ä¸­å¹¶è®¾ç½®ä¸‹è¾¹è· */
      padding: 10px;
      font-size: 16px;
      width: 80%; /* å®½åº¦ä¸ºå®¹å™¨çš„80% */
      max-width: 400px; /* æœ€å¤§å®½åº¦ä¸º400px */
      border: 1px solid #ccc; /* è¾¹æ¡†é¢œè‰² */
      border-radius: 4px; /* åœ†è§’ */
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* è½»å¾®é˜´å½± */
   }
   .destroy-container input:focus {
      border-color: #007BFF; /* èšç„¦æ—¶çš„è¾¹æ¡†é¢œè‰² */
      outline: none; /* å»é™¤é»˜è®¤èšç„¦æ ·å¼ */
      box-shadow: 0 2px 8px rgba(0, 123, 255, 0.25); /* èšç„¦æ—¶çš„é˜´å½±æ•ˆæœ */
   }
   </style>
</head>

<body>

   <!-- header -->

   <h1 style="text-align: center"> æ¬¢è¿ä½¿ç”¨ æŠ¥æŸæ¨¡å—ï¼</h1>

   <div class="destroy-container">
      <input id="ISBN_to_destroy" placeholder="enter ISBN">
      <button id="destroy-button">æŠ¥æŸå®ƒğŸ˜­</button>
   </div>
   <script>
      document.getElementById('destroy-button').addEventListener('click', async () => {

         // ISBN æ£€æŸ¥
         const ISBN = document.getElementById('ISBN_to_destroy').value;

         const ISBN_Regex = /^(978|979)\d{10}$/;
         if (!ISBN_Regex.test(ISBN)) {
            alert("ISBN åº”ä¸º13ä½æ•°å­—");
            document.getElementById('ISBN_to_destroy').value = '';
            return;
         }

         try {
            const response = await fetch('/api/catalog/destroy', {
               method: 'POST',
               headers: {
                  'Content-Type': 'application/json',
               },
               body: JSON.stringify({
                  ISBN: ISBN,
               }),
            });

            if (response.ok) {
               const result = await response.json();
               console.log('æŠ¥æŸæˆåŠŸ:', result);
               alert("æŠ¥æŸæˆåŠŸ: \u{1f60a}");
            } else {
               const result = await response.json();
               console.log('æŠ¥æŸå¤±è´¥: ' + result.message);
               alert('æŠ¥æŸå¤±è´¥\u{1f605}:' + result.message);
            }
         } catch (error) {
            console.error('è¯·æ±‚å‡ºé”™:', error);
            alert('æŠ¥æŸæ—¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•');
         }
      });
   </script>
</body>

</html>
